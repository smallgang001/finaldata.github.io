"use strict";(self["webpackChunkfinaldatas"]=self["webpackChunkfinaldatas"]||[]).push([[664],{9470:function(t,e,s){s.d(e,{Z:function(){return h}});var o=s(3396);const a={class:"repair"},i=(0,o.uE)('<div class="recon" data-v-7a6bdf60><h1 data-v-7a6bdf60>故障報修</h1><div class="ss" data-v-7a6bdf60></div><div class="pp" data-v-7a6bdf60><p class="p1" data-v-7a6bdf60>✓ 輸入訂單編號</p><p class="p2" data-v-7a6bdf60>✓ 一年內都可報修</p></div></div>',1),n=[i];function r(t,e){return(0,o.wg)(),(0,o.iD)("div",a,n)}var d=s(89);const l={},c=(0,d.Z)(l,[["render",r],["__scopeId","data-v-7a6bdf60"]]);var h=c},3664:function(t,e,s){s.r(e),s.d(e,{default:function(){return C}});var o=s(3396),a=s(7139),i=s(9242);const n=t=>((0,o.dD)("data-v-19d3dc3b"),t=t(),(0,o.Cn)(),t),r={class:"repairbody"},d={class:"retop"},l=n((()=>(0,o._)("div",{class:"aa"},[(0,o._)("div",{class:"online"})],-1))),c={class:"recontant"},h={class:"contant"},u={class:"p1"},p={style:{color:"#ffffff"}},m=(0,o.Uk)(" 保固到期日: "),f={style:{color:"#fe2424"}},v=(0,o.Uk)(" > "),g={class:"p2"},_=n((()=>(0,o._)("p",{style:{color:"#ffffff"}},"請輸入電話:",-1))),x={class:"p3"},b=n((()=>(0,o._)("p",{style:{color:"#ffffff"}},"請輸入信箱:",-1))),w={class:"p4"},y=n((()=>(0,o._)("p",{style:{color:"#ffffff"}},"請輸入問題:",-1)));function N(t,e,s,n,N,$){const I=(0,o.up)("LoadIng"),k=(0,o.up)("Repairimg");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(I,{active:N.Load},null,8,["active"]),(0,o._)("div",r,[(0,o._)("div",d,[(0,o.Wm)(k)]),l,(0,o._)("div",c,[(0,o._)("div",h,[(0,o._)("div",u,[(0,o._)("p",p,[m,(0,o._)("span",f,"您的保固日期:"+(0,a.zw)(N.textnums.ndata),1)])]),v,(0,o._)("div",g,[_,(0,o.wy)((0,o._)("input",{placeholder:"請輸入電話",class:(0,a.C_)(0==N.phonecolor?"form-control":"form-control is-invalid"),"onUpdate:modelValue":e[0]||(e[0]=t=>N.Notice.phone=t),oninput:"value=value.replace(/[^0-9.]/g,'')",type:"text"},null,2),[[i.nr,N.Notice.phone]])]),(0,o._)("div",x,[b,(0,o.wy)((0,o._)("input",{class:(0,a.C_)(1==N.emailtrue?"form-control":"form-control is-invalid"),"onUpdate:modelValue":e[1]||(e[1]=t=>N.Notice.email=t),type:"email",placeholder:"請輸入Email"},null,2),[[i.nr,N.Notice.email]])]),(0,o._)("div",w,[y,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>N.Notice.message=t),cols:"30",rows:"25",placeholder:"請輸入問題(30字內)",maxlength:"30"},null,512),[[i.nr,N.Notice.message]])]),(0,o._)("button",{onClick:e[3]||(e[3]=t=>$.order(N.Notice)),class:"grow_ellipse",type:"button"}," 回報送出 ")])])])],64)}var $=s(9470),I={data(){return{Notice:{name:"",phone:"",email:"",address:"",orderdata:"",gindo:"審核中"},Load:!1,orderId:"",login:{username:"s16113161@stu.edu.tw",password:"aytjjos123"},textnum:{},textnums:{},yen:!0,phonecolor:!1,emailtrue:!0}},components:{Repairimg:$.Z},inject:["EmiTter"],watch:{Notice:{handler(){const t=/^(09)\S{8}$/;t.test(this.Notice.phone)?this.phonecolor=!1:this.phonecolor=!0,""==this.Notice.phone&&(this.phonecolor=!1);const e=/^\S+[@]{1}\S+[.]{1}[c]{1}[o]{1}[m]{1}$/;e.test(this.Notice.email)?this.emailtrue=!0:this.emailtrue=!1,""==this.Notice.email&&(this.emailtrue=!0)},deep:!0}},created(){this.gg()},methods:{gg(){this.orderId=this.$route.params.orderId;const t=`https://vue3-course-api.hexschool.io/api/smallgun/order/${this.orderId}`;this.axios.get(t).then((t=>{t.data.success&&(this.textnum=t.data.order,this.textnums=t.data.order.user)}))},order(t){if(this.Load=!0,""==t.phone||""==t.email||""==t.message||1==this.phonecolor||0==this.emailtrue)alert("請輸入詳細資料"),this.Load=!1;else{const e="https://vue3-course-api.hexschool.io/admin/signin";this.axios.post(e,this.login).then((e=>{if(e.data.success){const e=document.cookie.replace(/(?:(?:^|.*;\s*)hihi\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common["Authorization"]=e;const s="https://vue3-course-api.hexschool.io/api/user/check";this.$http.post(s).then((e=>{const s=new Date;s.getFullYear(),s.getMonth(),s.getDate();s.setDate(s.getDate()),t.orderdata=s.toISOString().split("T")[0],this.textnum.user.nphone=t.phone,this.textnum.user.nmessage=t.message,this.textnum.user.nemail=t.email,this.textnum.user.ordergindo=t.gindo,this.textnum.user.orderdata=t.orderdata;const o=`https://vue3-course-api.hexschool.io/api/smallgun/admin/order/${this.orderId}`;this.$http.put(o,{data:this.textnum}).then((t=>{const e="https://vue3-course-api.hexschool.io/logout";this.axios.post(e,this.login).then((()=>{this.Load=!1,this.$router.push(`/RePairdata/RePairsure/${this.orderId}`)}))}))}))}}))}}}},k=s(89);const D=(0,k.Z)(I,[["render",N],["__scopeId","data-v-19d3dc3b"]]);var C=D}}]);
//# sourceMappingURL=664.1cbd1485.js.map