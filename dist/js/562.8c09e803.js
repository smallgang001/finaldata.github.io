"use strict";(self["webpackChunkfinaldatas"]=self["webpackChunkfinaldatas"]||[]).push([[562],{2322:function(t,a,s){s.r(a),s.d(a,{default:function(){return it}});var e=s(3396),o=s(7139);const l=t=>((0,e.dD)("data-v-d1fa94e4"),t=t(),(0,e.Cn)(),t),i={class:"whites",style:{background:"rgb(255, 255, 255)"}},n={class:"aaas"},c=(0,e.Uk)(" 產品列表 "),d={class:"table"},r=l((()=>(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th",{scope:"col-1"},"分類"),(0,e._)("th",{scope:"col-2"},"類別"),(0,e._)("th",{scope:"col-7"},"圖片"),(0,e._)("th",{scope:"col-1"},"是否啟用"),(0,e._)("th",{scope:"col-1"},"編輯")])],-1))),p={scope:"row"},h=["src"],u={key:0,class:"abs"},m={key:1},g=["onClick"],b=["onClick"],f={class:"s"};function _(t,a,s,l,_,v){const y=(0,e.up)("LoadIng"),x=(0,e.up)("TanTuoimg"),w=(0,e.up)("FanYa");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(y,{active:_.Load},null,8,["active"]),(0,e._)("div",i,[(0,e._)("div",n,[c,(0,e._)("button",{onClick:a[0]||(a[0]=(...t)=>v.xx&&v.xx(...t)),type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," 新增輪播圖 "),(0,e.Wm)(x,{ref:"a",onGetda:v.xxgg},null,8,["onGetda"])]),(0,e._)("table",d,[r,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(_.newproducts,(t=>((0,e.wg)(),(0,e.iD)("tr",{key:t.id},[(0,e._)("th",p,(0,o.zw)(t.category),1),(0,e._)("td",null,(0,o.zw)(t.leabia),1),(0,e._)("td",null,[(0,e._)("img",{src:t.ims,alt:"",style:{"max-width":"120px"},class:"as"},null,8,h)]),1==t.is_enabled?((0,e.wg)(),(0,e.iD)("td",u,"是")):1!=t.is_enabled?((0,e.wg)(),(0,e.iD)("td",m,"不是")):(0,e.kq)("",!0),(0,e._)("button",{onClick:a=>v.benge(t),class:"btn btn-secondary bbb",type:"button"}," 編輯 ",8,g),(0,e._)("button",{onClick:a=>v.del(t),class:"btn btn-danger bbb",type:"button"}," 刪除 ",8,b)])))),128))])]),(0,e._)("div",f,[(0,e.Wm)(w,{ppp:_.page,newpage:_.onpage,oldpage:_.unpage,onAa:v.aSSS,onAs:v.aSSS,onAc:v.aSSS},null,8,["ppp","newpage","oldpage","onAa","onAs","onAc"])])])],64)}var v=s(9242);const y=t=>((0,e.dD)("data-v-0ee4afc5"),t=t(),(0,e.Cn)(),t),x={class:"max modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"aa"},w={class:"maxss modal-dialog"},k={class:"maxs modal-content"},$=y((()=>(0,e._)("div",{class:"modal-header"},[(0,e._)("h5",{class:"modal-title",id:"exampleModalLabel"},"新增商品項目"),(0,e._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),S={class:"modal-body"},C={class:"right"},D=y((()=>(0,e._)("p",null,"請輸入圖片網址",-1))),L=y((()=>(0,e._)("label",{for:"formFileLg",class:"form-label"},"或，上傳圖片",-1))),T=["src"],U={class:"left"},M={class:"two"},A={class:"ssd"},E={class:"ssddf"},F={class:"ssdfan"},V=y((()=>(0,e._)("p",null,"分類",-1))),j=y((()=>(0,e._)("option",{value:"",hidden:""},"請選擇商品分類",-1))),Y=y((()=>(0,e._)("option",{value:"輪播圖"},"輪播圖",-1))),q=[j,Y],z={class:"ssdlea"},I=y((()=>(0,e._)("p",null,"類別",-1))),W=y((()=>(0,e._)("option",{class:"form-control form-control-lg",value:"",hidden:""}," 請選擇 ",-1))),Z=[W],G=(0,e.uE)('<option class="form-control form-control-lg" value="" hidden data-v-0ee4afc5> 請選擇 </option><option class="form-control form-control-lg" value="顯示卡" data-v-0ee4afc5> 顯示卡 </option><option class="form-control form-control-lg" value="記憶體" data-v-0ee4afc5> 記憶體 </option><option class="form-control form-control-lg" value="CPU" data-v-0ee4afc5> CPU </option><option class="form-control form-control-lg" value="主機板" data-v-0ee4afc5> 主機板 </option>',5),H=[G],P={class:"sa"},K=["value"],O=y((()=>(0,e._)("p",null,"是否啟用",-1))),B={class:"modal-footer"},J=y((()=>(0,e._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)));function N(t,a,s,o,l,i){return(0,e.wg)(),(0,e.iD)("div",x,[(0,e._)("div",w,[(0,e._)("div",k,[$,(0,e._)("div",S,[(0,e._)("div",C,[D,(0,e.wy)((0,e._)("input",{class:"form-control form-control-lg",type:"text",placeholder:"請輸入圖片網址","onUpdate:modelValue":a[0]||(a[0]=t=>l.tt.ims=t)},null,512),[[v.nr,l.tt.ims]]),(0,e._)("div",null,[L,(0,e._)("input",{class:"form-control form-control-lg",id:"formFileLg",type:"file",ref:"fileimgs",onChange:a[1]||(a[1]=(...t)=>i.fileimg&&i.fileimg(...t))},null,544)]),(0,e._)("button",{onClick:a[2]||(a[2]=(...a)=>t.bs&&t.bs(...a)),class:"padd btn btn-primary form-control form-control-lg",type:"button"}," 上傳圖片 "),(0,e._)("img",{src:l.tt.ims,alt:"",class:"as"},null,8,T)]),(0,e._)("div",U,[(0,e._)("div",M,[(0,e._)("div",A,[(0,e._)("div",E,[(0,e._)("div",F,[V,(0,e.wy)((0,e._)("select",{class:"fanlea1","onUpdate:modelValue":a[3]||(a[3]=t=>l.tt.category=t)},q,512),[[v.bM,l.tt.category]])]),(0,e._)("div",z,[I,""==l.tt.category?(0,e.wy)(((0,e.wg)(),(0,e.iD)("select",{key:0,class:"fanlea2","onUpdate:modelValue":a[4]||(a[4]=t=>l.tt.leabia=t),disabled:""},Z,512)),[[v.bM,l.tt.leabia]]):(0,e.kq)("",!0),"輪播圖"==l.tt.category?(0,e.wy)(((0,e.wg)(),(0,e.iD)("select",{key:1,class:"fanlea2","onUpdate:modelValue":a[5]||(a[5]=t=>l.tt.leabia=t)},H,512)),[[v.bM,l.tt.leabia]]):(0,e.kq)("",!0)])])])]),(0,e._)("div",P,[(0,e.wy)((0,e._)("input",{"onUpdate:modelValue":a[6]||(a[6]=t=>l.tt.is_enabled=t),class:"sav",type:"checkbox",value:l.tt},null,8,K),[[v.e8,l.tt.is_enabled]]),O])])]),(0,e._)("div",B,[J,(0,e._)("button",{onClick:a[7]||(a[7]=(...t)=>i.newshop&&i.newshop(...t)),type:"button",class:"btn btn-primary"}," 新增圖片 ")])])])],512)}var Q=s(7972),R=s.n(Q),X={data(){return{aa:{},tt:{category:"",leabia:"",title:"",unit:"",origin_price:"",price:""},ts:{},loading:!1}},inject:["EmiTter"],created(){},methods:{as(){this.aa.show()},ad(){this.aa.hide()},newshop(){if(this.tt.title="1",this.tt.unit="1",this.tt.origin_price=1,this.tt.price=1,void 0==this.tt.id){const t="https://vue3-course-api.hexschool.io/api/smallgun/admin/product";this.$http.post(t,{data:this.tt}).then((t=>{this.tt={},this.$emit("getda"),t.data.success?this.EmiTter.emit("mess",{style:"rgb(6, 173, 202)",title:"商品添加成功",content:"以增加商品"}):t.data.success||this.EmiTter.emit("mess",{style:"rgb(228, 15, 210)",title:"商品添加失敗",content:t.data.message.join("、")})})),this.aa.hide()}else{const t=`https://vue3-course-api.hexschool.io/api/smallgun/admin/product/${this.tt.id}`;this.$http.put(t,{data:this.tt}).then((t=>{this.tt={},this.$emit("getda"),t.data.success?this.EmiTter.emit("mess",{style:"rgb(6, 173, 202)",title:"更新成功",content:"已成功更新商品"}):t.data.success||this.EmiTter.emit("mess",{style:"rgb(228, 15, 210)",title:"更新失敗",content:t.data.message.join("、")})})),this.aa.hide()}},fileimg(){const t=this.$refs.fileimgs.files[0],a=new FormData;a.append("file-to-upload",t);const s="https://vue3-course-api.hexschool.io/api/smallgun/admin/upload";this.$http.post(s,a).then((t=>{this.tt.ims=t.data.imageUrl}))}},mounted(){this.aa=new(R())(this.$refs.aa)}},tt=s(89);const at=(0,tt.Z)(X,[["render",N],["__scopeId","data-v-0ee4afc5"]]);var st=at,et=s(6209),ot={props:["pa"],data(){return{page:"",newpage:[],products:[],newproducts:[],pages:[],bb:{},xxx:"",Load:!1,onpage:"",unpage:"",url:""}},components:{TanTuoimg:st,FanYa:et.Z},created(){this.url=this.$route.path;const t=document.cookie.replace(/(?:(?:^|.*;\s*)hihi\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common["Authorization"]=t;const a="https://vue3-course-api.hexschool.io/api/user/check";this.$http.post(a).then((t=>{t.data.success||this.$router.push("/DunLoo")})),this.aSSS()},methods:{aSSS(t=1){this.Load=!0;const a="https://vue3-course-api.hexschool.io/api/smallgun/admin/products/all";this.axios.get(a).then((a=>{this.Load=!1,a.data.success&&(this.pages=Object.values(a.data.products),this.products=this.pages.filter((t=>"輪播圖"==t.category)),this.newpage=Math.ceil(this.products.length/10),this.page=this.newpage,this.unpage=t,this.onpage=t,this.newproducts=this.products.slice(10*(t-1),10*t),this.xxx=t)}))},benge(t){this.$refs.a.as(),this.$refs.a.tt=t},xx(){this.$refs.a.as(),this.$refs.a.tt={category:"",leabia:""}},xxgg(){this.aSSS(this.xxx)},del(t){this.$refs.a.tt=t;const a=`https://vue3-course-api.hexschool.io/api/smallgun/admin/product/${this.$refs.a.tt.id}`;this.$http.delete(a,{data:this.tt}).then((t=>{})),this.aSSS(),this.xxgg()}}};const lt=(0,tt.Z)(ot,[["render",_],["__scopeId","data-v-d1fa94e4"]]);var it=lt}}]);
//# sourceMappingURL=562.8c09e803.js.map