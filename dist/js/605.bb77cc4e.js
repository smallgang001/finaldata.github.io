"use strict";(self["webpackChunkfinaldatas"]=self["webpackChunkfinaldatas"]||[]).push([[605],{802:function(t,a,e){e.r(a),e.d(a,{default:function(){return mt}});var s=e(3396),l=e(7139);const o=t=>((0,s.dD)("data-v-79d48b96"),t=t(),(0,s.Cn)(),t),n={class:"whites"},i={class:"aaas"},d=(0,s.Uk)(" 產品列表 "),c={class:"table"},u=o((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col-1"},"分類"),(0,s._)("th",{scope:"col-7"},"名稱"),(0,s._)("th",{scope:"col-1"},"打幾折"),(0,s._)("th",{scope:"col-1"},"截止日期"),(0,s._)("th",{scope:"col-1"},"折扣碼"),(0,s._)("th",{scope:"col-1"},"編輯")])],-1))),p={key:0,class:"abs"},r={key:1},h={class:"abs"},m=["onClick"],b=["onClick"],_={class:"s"};function g(t,a,e,o,g,v){const f=(0,s.up)("LoadIng"),y=(0,s.up)("TanTuo"),w=(0,s.up)("FanYa");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(f,{active:g.Load},null,8,["active"]),(0,s._)("div",n,[(0,s._)("div",i,[d,(0,s._)("button",{onClick:a[0]||(a[0]=(...t)=>v.xx&&v.xx(...t)),type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," 新增優惠券 "),(0,s.Wm)(y,{ref:"a",onGetda:v.xxgg},null,8,["onGetda"])]),(0,s._)("table",c,[u,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(g.newproducts,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[1==t.is_enabled?((0,s.wg)(),(0,s.iD)("td",p,"是")):1!=t.is_enabled?((0,s.wg)(),(0,s.iD)("td",r,"不是")):(0,s.kq)("",!0),(0,s._)("td",null,(0,l.zw)(t.title),1),(0,s._)("td",null,(0,l.zw)(t.percent),1),(0,s._)("td",null,(0,l.zw)(t.due_date),1),(0,s._)("td",h,(0,l.zw)(t.code),1),(0,s._)("button",{onClick:a=>v.benge(t),class:"btn btn-secondary bbb",type:"button"}," 編輯 ",8,m),(0,s._)("button",{onClick:a=>v.del(t),class:"btn btn-danger bbb",type:"button"}," 刪除 ",8,b)])))),128))])]),(0,s._)("div",_,[(0,s.Wm)(w,{ppp:g.page,newpage:g.onpage,oldpage:g.unpage,onAa:v.aSSS,onAs:v.aSSS,onAc:v.aSSS},null,8,["ppp","newpage","oldpage","onAa","onAs","onAc"])])])],64)}var v=e(9242);const f=t=>((0,s.dD)("data-v-3d7754b6"),t=t(),(0,s.Cn)(),t),y={class:"max modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"aa"},w={class:"maxss modal-dialog"},x={class:"maxs modal-content"},k=f((()=>(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"},"新增商品項目"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),$={class:"modal-body"},S={class:"left"},C={class:"naone"},D={class:"na"},U=f((()=>(0,s._)("p",null,"請輸入名稱",-1))),T={class:"na"},V=f((()=>(0,s._)("p",null,"折扣幾元(數字填寫)",-1))),L={class:"natwo"},M={class:"na"},A=["value"],z=f((()=>(0,s._)("p",null,"是否啟用",-1))),E={class:"na"},j=f((()=>(0,s._)("p",null,"啟用數量",-1))),Y={class:"na"},q=f((()=>(0,s._)("p",null,"截止日期(數字填寫)",-1))),I={class:"na"},W=f((()=>(0,s._)("p",null,"請輸入代碼",-1))),Z={class:"two"},F={class:"ssd"},G={class:"ssddf"},H={class:"ssdfan"},K=f((()=>(0,s._)("p",null,"分類",-1))),O=f((()=>(0,s._)("option",{value:"",hidden:""},"請選擇商品分類",-1))),B=f((()=>(0,s._)("option",{value:"優惠券"},"優惠券",-1))),J=[O,B],N={class:"ssdlea"},P=f((()=>(0,s._)("p",null,"類別",-1))),Q=f((()=>(0,s._)("option",{class:"form-control form-control-lg",value:"",hidden:""}," 請選擇 ",-1))),R=[Q],X=f((()=>(0,s._)("option",{class:"form-control form-control-lg",value:"",hidden:""}," 請選擇 ",-1))),tt=f((()=>(0,s._)("option",{class:"form-control form-control-lg",value:"代碼"}," 代碼 ",-1))),at=[X,tt],et={class:"modal-footer"},st=f((()=>(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)));function lt(t,a,e,l,o,n){return(0,s.wg)(),(0,s.iD)("div",y,[(0,s._)("div",w,[(0,s._)("div",x,[k,(0,s._)("div",$,[(0,s._)("div",S,[(0,s._)("div",C,[(0,s._)("div",D,[U,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>o.tt.title=t),class:"form-control form-control-lg",type:"text"},null,512),[[v.nr,o.tt.title]])]),(0,s._)("div",T,[V,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>o.tt.percent=t),class:"form-control form-control-lg",type:"number",min:"1",oninput:"if(value<1)value=1"},null,512),[[v.nr,o.tt.percent]])])]),(0,s._)("div",L,[(0,s._)("div",M,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>o.tt.is_enabled=t),class:"sav",type:"checkbox",value:o.tt},null,8,A),[[v.e8,o.tt.is_enabled]]),z]),(0,s._)("div",E,[j,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>o.tt.is_enabled=t),class:"form-control form-control-lg",type:"number"},null,512),[[v.nr,o.tt.is_enabled]])]),(0,s._)("div",Y,[q,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[4]||(a[4]=t=>o.tt.due_date=t),class:"form-control form-control-lg",type:"number"},null,512),[[v.nr,o.tt.due_date]])]),(0,s._)("div",I,[W,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[5]||(a[5]=t=>o.tt.code=t),class:"form-control form-control-lg",type:"text"},null,512),[[v.nr,o.tt.code]])])]),(0,s._)("div",Z,[(0,s._)("div",F,[(0,s._)("div",G,[(0,s._)("div",H,[K,(0,s.wy)((0,s._)("select",{class:"fanlea1","onUpdate:modelValue":a[6]||(a[6]=t=>o.tt.category=t)},J,512),[[v.bM,o.tt.category]])]),(0,s._)("div",N,[P,""==o.tt.category?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,class:"fanlea2","onUpdate:modelValue":a[7]||(a[7]=t=>o.tt.leabia=t),disabled:""},R,512)),[[v.bM,o.tt.leabia]]):(0,s.kq)("",!0),"優惠券"==o.tt.category?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:1,class:"fanlea2","onUpdate:modelValue":a[8]||(a[8]=t=>o.tt.leabia=t)},at,512)),[[v.bM,o.tt.leabia]]):(0,s.kq)("",!0)])])])])])]),(0,s._)("div",et,[st,(0,s._)("button",{onClick:a[9]||(a[9]=(...t)=>n.newshop&&n.newshop(...t)),type:"button",class:"btn btn-primary"}," 新增優惠券 ")])])])],512)}var ot=e(7972),nt=e.n(ot),it={data(){return{aa:{},tt:{title:"",is_enabled:1,percent:"",due_date:"",code:""},ts:{},loading:!1}},inject:["EmiTter"],created(){},methods:{as(){this.aa.show()},ad(){this.aa.hide()},newshop(){if(void 0==this.tt.id){const t="https://vue3-course-api.hexschool.io/api/smallgun/admin/coupon";this.$http.post(t,{data:this.tt}).then((t=>{this.tt={},this.$emit("getda"),t.data.success?this.EmiTter.emit("mess",{style:"rgb(6, 173, 202)",title:"商品添加成功",content:"以增加商品"}):t.data.success||this.EmiTter.emit("mess",{style:"rgb(228, 15, 210)",title:"商品添加失敗",content:t.data.message.join("、")})})),this.aa.hide()}else{const t=`https://vue3-course-api.hexschool.io/api/smallgun/admin/coupon/${this.tt.id}`;this.$http.put(t,{data:this.tt}).then((t=>{this.tt={},this.$emit("getda"),t.data.success?this.EmiTter.emit("mess",{style:"rgb(6, 173, 202)",title:"更新成功",content:"已成功更新商品"}):t.data.success||this.EmiTter.emit("mess",{style:"rgb(228, 15, 210)",title:"更新失敗",content:t.data.message.join("、")})})),this.aa.hide()}}},mounted(){this.aa=new(nt())(this.$refs.aa)}},dt=e(89);const ct=(0,dt.Z)(it,[["render",lt],["__scopeId","data-v-3d7754b6"]]);var ut=ct,pt=e(6209),rt={props:["pa"],data(){return{page:"",newpage:[],products:[],newproducts:[],pages:[],bb:{},xxx:"",Load:!1,onpage:"",unpage:"",url:""}},components:{TanTuo:ut,FanYa:pt.Z},created(){this.url=this.$route.path;const t=document.cookie.replace(/(?:(?:^|.*;\s*)hihi\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common["Authorization"]=t;const a="https://vue3-course-api.hexschool.io/api/user/check";this.$http.post(a).then((t=>{t.data.success||this.$router.push("/DunLoo")})),this.aSSS()},methods:{aSSS(t=1){this.Load=!0;const a=`https://vue3-course-api.hexschool.io/api/smallgun/admin/coupons?path=${t}`;this.axios.get(a).then((a=>{this.Load=!1,a.data.success&&(this.pages=Object.values(a.data.coupons),this.products=this.pages.filter((t=>"優惠券"==t.category)),this.newpage=Math.ceil(this.products.length/5),this.page=this.newpage,this.unpage=t,this.onpage=t,this.newproducts=this.products.slice(5*(t-1),5*t),this.xxx=t)}))},benge(t){this.$refs.a.as(),this.$refs.a.tt=t},xx(){this.$refs.a.as(),this.$refs.a.tt={category:"",leabia:""}},xxgg(){this.aSSS(this.xxx)},del(t){this.$refs.a.tt=t;const a=`https://vue3-course-api.hexschool.io/api/smallgun/admin/coupon/${this.$refs.a.tt.id}`;this.$http.delete(a,{data:this.tt}).then((t=>{})),this.aSSS(),this.xxgg()}}};const ht=(0,dt.Z)(rt,[["render",g],["__scopeId","data-v-79d48b96"]]);var mt=ht}}]);
//# sourceMappingURL=605.bb77cc4e.js.map